<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=9" >

<title>uci-har-tidy-dataset</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}

</style>





</head>

<body>
<h1>uci-har-tidy-dataset</h1>

<h2>What is it?</h2>

<p>The University of California Irvine&#39;s (UCI&#39;s) dataset for Human Activity Recognition (HAR) using smartphones is a public domain dataset built from the recordings of subjects performing activities of daily living (ADL) while carrying a waist-mounted smartphone with embedded inertial sensor (see <a href="https://www.elen.ucl.ac.be/Proceedings/esann/esannpdf/es2013-84.pdf">https://www.elen.ucl.ac.be/Proceedings/esann/esannpdf/es2013-84.pdf</a>).</p>

<p>As noted in the above referenced document and the associated README.txt in the downloadable zip file, experiments were carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWnSTAIRS, SITTING, STANDING, and LAYING) wearing a Samsung Galaxy S II smartphone on the waist. Using its embedded accelerometer and gyroscope, 3-axial linear acceleration and 3-axial angular velocity were captured at a constant rate of 50Hz. The experiments were video-recorded to label the data manually. The obtained dataset was randomly partitioned into two sets, with 70% of the volunteers selected for generating the training data and 30% the test data. </p>

<p>The sensor signals (accelerometer and gyroscope) were pre-processed by applying noise filters and then sampled in fixed-width sliding windows of 2.56 sec and 50% overlap (128 readings/window). The sensor acceleration signal, which has gravitational and body motion components, was separated using a Butterworth low-pass filter into body acceleration and gravity. The gravitational force was assumed to have only low frequency components, so a filter with a 0.3 Hz cutoff frequency was used. From each window, a vector of features was obtained by calculating variables from the time and frequency domain.</p>

<p>For each observation, the following data was provided:</p>

<ul>
<li>Triaxial acceleration from the accelerometer (total acceleration) and the estimated body acceleration.</li>
<li>Triaxial Angular velocity from the gyroscope. </li>
<li>A 561-feature vector with time and frequency domain variables. </li>
<li>Its activity label. </li>
<li>An identifier of the subject who carried out the experiment.</li>
</ul>

<h2>Structure of the UCI HAR Dataset zip file</h2>

<p>The zip file is downloaded from &ldquo;<a href="https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip">https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip</a>&rdquo;. See <a href="http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones">http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones</a> for the original source. In the downloaded zip file, a UCI HAR Dataset folder contains the following files/folders:</p>

<ul>
<li>README.txt</li>
<li>features_info.txt: Shows information about the variables used on the feature vector.</li>
<li>features.txt: List of all features.</li>
<li>activity_labels.txt: Links the class labels with their activity name.</li>
<li>test folder with the following files/folders:

<ul>
<li>subject_test.txt: Each row identifies the subject who performed the activity for each window sample. Its range is from 1 to 30.</li>
<li>X_test.txt: Test set.</li>
<li>y_test.txt&#39;: Test labels.</li>
<li>Inertial Signals folder containing the following files;

<ul>
<li>body_acc_x_test.txt: The body acceleration signal obtained by subtracting the gravity from the total acceleration.</li>
<li>body_acc_y_test.txt: Same as above for the y axis.</li>
<li>body_acc_z_test.txt: Same as above for the z axis.</li>
<li>body_gyro_x_test.txt: The angular velocity vector measured by the gyroscope for each window sample. The units are radians/second.</li>
<li>body_gyro_y_test.txt: Same as above for the y axis.</li>
<li>body_gyro_z_test.txt: Same as above for the z axis.</li>
<li>total_acc_x_test.txt: The acceleration signal from the smartphone accelerometer X axis in standard gravity units &#39;g&#39;. Every row shows a 128 element vector.</li>
<li>total_acc_y_test.txt: Same as above for the y axis.</li>
<li>total_acc_z_test.txt: Same as above for the z axis.<br/></li>
</ul></li>
</ul></li>
<li>train folder with the same files/folders as the test folder (substituting &#39;train&#39; for &#39;test&#39; in the file names).</li>
</ul>

<h2>Description of UCI HAR Dataset processed signals</h2>

<p>In the X_test.txt and X_train.txt datasets, the 33 processed signals fall into two categories:</p>

<ul>
<li>20 time domain signals (with a prefix of &#39;t&#39;) and</li>
<li>13 frequency domain signals (with a prefix of &#39;f&#39;).</li>
</ul>

<p>The time domain signals came from the accelerometer and gyroscope 3-axial raw signals filtered to remove noise. The acceleration signal was separated into body and gravity acceleration signals. These signals are prefixed with:</p>

<ul>
<li>&#39;tBodyAcc&#39; by axis,</li>
<li>&#39;tGravityAcc&#39; by axis, or</li>
<li>&#39;tBodyGyro&#39; by axis.<br/></li>
</ul>

<p>The body linear acceleration and angular velocity were derived in time to obtain Jerk signals. These signals are prefixed with:</p>

<ul>
<li>&#39;tBody_AccJerk&#39; by axis or</li>
<li>&#39;tBodyGyroJerk&#39; by axis.</li>
</ul>

<p>The magnitude of these three-dimensional signals was also calculated. These signals are prefixed by:</p>

<ul>
<li>&#39;tBodyAccMag&#39;,</li>
<li>&#39;tGravityAccMag&#39;,</li>
<li>&#39;tBodyAccJerkMag&#39;,</li>
<li>&#39;tBodyGyroMag&#39;, or</li>
<li>&#39;tBodyGyroJerkMag&#39;. </li>
</ul>

<p>The frequency domain signals were obtained by applying a Fast Fourier Transform (FFT) to some of the signals. These signals are prefixed by:</p>

<ul>
<li>&#39;fBodyAcc&#39; by axis,</li>
<li>&#39;fBodyAccJerk&#39;by axis, or </li>
<li>&#39;fBodyGyro&#39; by axis.</li>
</ul>

<p>The magnitude of these three-dimensional signals was also calculated. These signals are prefixed by:</p>

<ul>
<li>&#39;fBodyAccMag&#39;,</li>
<li>&#39;fBodyAccJerkMag&#39;,</li>
<li>&#39;fBodyGyroMag&#39;, or</li>
<li>&#39;fBodyGyroJerkMag&#39;.</li>
</ul>

<h2>Description of UCI HAR Dataset feature vector</h2>

<p>From each sampled observation of the 33 processed signals, a feature vector consisting of 561 measures was derived. The measures were defined as follows:</p>

<ul>
<li><p>For each of the 33 processed signals, the following 8 measures were derived (264 total features):</p>

<ul>
<li>mean(): Mean value</li>
<li>std(): Standard deviation</li>
<li>mad(): Median absolute deviation </li>
<li>max(): Largest value in array</li>
<li>min(): Smallest value in array</li>
<li>energy(): Energy measure. Sum of the squares divided by the number of values. </li>
<li>iqr(): Interquartile range </li>
<li>entropy(): Signal entropy</li>
</ul></li>
<li><p>For each of the 17 overall signal categories (not broken down by axis), the following measure was derived (17 total features):</p>

<ul>
<li>sma(): Signal magnitude area</li>
</ul></li>
<li><p>For the 20 time domain signals, the following 4 measures were derived (80 total features):</p>

<ul>
<li>arCoeff(): Autorregresion coefficients with Burg order equal to 4 (4 measurements)</li>
</ul></li>
<li><p>For the 5 basic non-magnitude time domain signal categories (not broken down by axis), the following 3 measures were derived (15 total features):</p>

<ul>
<li>correlation(): correlation coefficient between two signal axes (3 measurements)</li>
</ul></li>
<li><p>For the 13 frequency domain signals, the following 4 measures were derived (52 total features):</p>

<ul>
<li>maxInds(): index of the frequency component with largest magnitude</li>
<li>meanFreq(): Weighted average of the frequency components to obtain a mean frequency</li>
<li>skewness(): skewness of the frequency domain signal </li>
<li>kurtosis(): kurtosis of the frequency domain signal</li>
</ul></li>
<li><p>For the 3 basic non-magnitude frequency domain signal categories (not broken down by axis), the following 42 band measures were derived (126 total features):</p>

<ul>
<li>bandsEnergy(): Energy of a frequency interval within the 64 bins of the FFT of each window (42 measurements)</li>
</ul></li>
<li><p>Additional vectors were obtained by averaging the signals in a signal window sample in order to compute the following 7 angle measures (7 total features): </p>

<ul>
<li>angle(): Angle between two vectors.

<ul>
<li>angle(tBodyAccMean,gravity)</li>
<li>angle(tBodyAccJerkMean),gravityMean)</li>
<li>angle(tBodyGyroMean,gravityMean)</li>
<li>angle(tBodyGyroJerkMean,gravityMean)</li>
<li>angle(X,gravityMean)</li>
<li>angle(Y,gravityMean)</li>
<li>angle(Z,gravityMean)</li>
</ul></li>
</ul></li>
</ul>

<p>Each feature was normalized and bounded within [-1,1], making it a unitless measure. The feature vector for each observation was represented by a row in the randomly partitioned X_test.txt and X_train.txt files.</p>

<h2>Purpose and description of the &#39;run_analysis.R&#39; script</h2>

<p>The purpose of the &#39;run_analysis.R&#39; script is to create a tidy dataset consisting of a subset of the UCI HAR Dataset for use as input in further analysis.</p>

<p>The script first generates a combined subset of the data by extracting the mean and standard deviation features for each of the 33 processed signals in the X_test.txt and X_train.txt files, for a total of 66 features out of the 561 available features in the feature vector. Other features with &#39;mean&#39; in their names, such as meanFreq(), were intentionally excluded because they only pertained to a subset of the processed signals.</p>

<p>This combined subset contains 10299 observations of 68 variables (with activity and subject appended to the 66 features). The combined subset is then further reduced by calculating the mean of the observations by activity and subject. The resultant tidy dataset consists of 180 observations (6 activities * 30 subjects) of the same 68 variables and is saved as a comma-separated text file in the current working directory.</p>

<p>Specifically, the scripts accomplishes the following:</p>

<ul>
<li>Downloads a cloud-based zipped copy of the UCI HAR dataset (&ldquo;<a href="https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip%22">https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip&rdquo;</a>) if it does not already exist in the current working directory.</li>
<li>Unzips the &ldquo;UCI HAR Dataset&rdquo; folder if it does not already exist in the current working directory.</li>
<li>Creates a data table of activity names (from the &ldquo;/activity_labels.txt&rdquo; file in the unzipped folder) in lower case with a descriptive column name.</li>
<li>Creates a data table of feature names (from the &ldquo;/features.txt&rdquo; file in the unzipped folder), eliminating the first column, and adding a descriptive column name.</li>
<li>Determines which feature names identify mean and standard deviation measurements.</li>
<li>Translates the row numbers of the selected feature names into column numbers.</li>
<li>Keeps only the mean and standard deviation feature names.</li>
<li>Makes feature names more descriptive by following Hadley wickham&#39;s style guide (<a href="http://adv-r.had.co.nz/Style.html">http://adv-r.had.co.nz/Style.html</a>) by changing:

<ul>
<li>&#39;BodyBody&#39; to &#39;body_&#39;</li>
<li>&#39;Body&#39; to &#39;body_&#39;</li>
<li>The leading &#39;f&#39; to &#39;freq_&#39;</li>
<li>&#39;Acc&#39; to &#39;accel_&#39;</li>
<li>&#39;Gravity&#39; to &#39;gravity_&#39;</li>
<li>&#39;Jerk&#39; to &#39;jerk_&#39;</li>
<li>&#39;Gyro&#39; to&#39;gyro_&#39;</li>
<li>&#39;-mean()-X&#39; to &#39;xaxis_avg&#39;</li>
<li>&#39;-mean()-Y&#39; to &#39;yaxis_avg&#39;</li>
<li>&#39;-mean()-Z&#39; to &#39;zaxis_avg&#39;</li>
<li>&#39;-std()-X&#39; to &#39;xaxis_stddev&#39;</li>
<li>&#39;-std()-Y&#39; to &#39;yaxis_stddev&#39;</li>
<li>&#39;-std()-Z&#39; to &#39;zaxis_stddev&#39;</li>
<li>&#39;Mag-mean() to &#39;magn_avg&#39;</li>
<li>&#39;Mag-std()&#39; to &#39;magn_stddev&#39;</li>
</ul></li>
<li>Creates a data table of subject IDs from the training dataset (&ldquo;/train/subject_train.txt&rdquo; in the unzipped folder&quot;), adding a descriptive column name.</li>
<li>Creates a data table of subject IDs from the test dataset (&ldquo;/test/subject_test.txt&rdquo; in the unzipped folder), adding a descriptive column name.</li>
<li>Creates a data table of activity IDs from the training dataset (&ldquo;/train/y_train.txt&rdquo; in the unzipped folder), adding a descriptive column name, and replacing the activity IDs with their associated activity names.</li>
<li>Creates a data table of activity IDs from the test dataset (&ldquo;/test/y_test.txt&rdquo; in the unzipped folder), adding a descriptive column name, and replacing the activity IDs with their associated activity names.</li>
<li>Creates a data table of the training observations (&ldquo;/train/X_train.txt&rdquo; in the unzipped folder), keeping only the previously identified columns with mean and standard deviation measurements, using the descriptive feature names, and inserting columns for activity and subject_id).</li>
<li>Creates a data table of test observations (&ldquo;/test/X_test.txt&rdquo; in the unzipped folder), keeping only the previously identified columns with mean and standard deviation measurements, using the descriptive feature names, and inserting columns for activity and subject_id).</li>
<li>Combines the training and test data tables into a new data table, ordering by activity and subject_id.</li>
<li>Optional: Creates a comma-separated flat file of the combined data table (&ldquo;./Combined UCI HAR Dataset.txt&rdquo;) in the current working directory.</li>
<li>Creates a tidy data table of the means of each variable in the combined data table, summarized by activity and subject_id.</li>
<li>Creates a comma-separated flat file of the tidy data table (&ldquo;./Tidy UCI HAR Dataset.txt&rdquo;) in the current working directory.</li>
</ul>

<p>The flat file(s) can be subsequently read back in using read.csv (ex: my_dt &lt;- data.table(read.csv(combined_file, stringsAsFactors = F))) to re-create the data table(s) for further analysis. To prove that the re-created data table(s) is/are identical, use the compare package as illustrated below:</p>

<blockquote>
<p>library(compare)</p>

<p>new_combined_dt &lt;- data.table(read.csv(combined_file, stringsAsFactors = F))</p>

<p>new_tidy_dt &lt;- data.table(read.csv(tidy_file, stringsAsFactors = F))</p>

<p>print(compare(data.frame(new_combined_dt),data.frame(combined_dt)))</p>

<p>print(compare(data.frame(new_tidy_dt),data.frame(tidy_dt)))</p>
</blockquote>

</body>

</html>

